{% extends "base.html" %}
{% block content %}
<div class="max-w-3xl mx-auto p-4">
    <h1 class="text-2xl font-bold text-center mb-6">
        {{ match.blue_roster.team.name }} <span class="text-gray-500">vs</span> {{ match.red_roster.team.name }}
    </h1>
    <div class="text-center mb-4 text-blue-700 text-xl font-bold">
        {{ match.score_str }}
    </div>
    {% for gameinfo in games_data %}
        <div class="mb-8 border rounded-lg p-4 bg-gray-50">
            <h2 class="text-lg font-semibold text-gray-700 text-center mb-2">
                Game {{ gameinfo.game.game_number }}
                {% if gameinfo.game.winner %}
                    â€” <span class="text-green-700">Vainqueur: {{ gameinfo.game.winner.team.name }}</span>
                {% endif %}
            </h2>
            <div class="grid grid-cols-2 gap-4">
                <!-- Blue Side (can be either team, depends on swapped) -->
                <div>
                    <div class="flex items-center gap-2 mb-2">
                        <img src="{{ gameinfo.blue_roster.team.logo.url }}" class="w-8 h-8 rounded-full border" />
                        <span class="font-semibold text-blue-700">{{ gameinfo.blue_roster.team.name }}</span>
                    </div>
                    <table class="min-w-full bg-white rounded shadow text-sm">
                        <thead>
                            <tr>
                                <th>Joueur</th><th>Champion</th><th>K</th><th>D</th><th>A</th>
                            </tr>
                        </thead>
                        <tbody>
                        {% for stat in gameinfo.blue_stats %}
                            <tr>
                                <td>{{ stat.roster_player.player.name }}</td>
                                <td>
                                    {% if stat.champion %}
                                        <img src="{{ stat.champion.image.url }}" class="w-6 h-6 inline mr-1" />
                                        {{ stat.champion.name }}
                                    {% endif %}
                                </td>
                                <td>{{ stat.kills }}</td>
                                <td>{{ stat.deaths }}</td>
                                <td>{{ stat.assists }}</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
                <!-- Red Side -->
                <div>
                    <div class="flex items-center gap-2 mb-2">
                        <img src="{{ gameinfo.red_roster.team.logo.url }}" class="w-8 h-8 rounded-full border" />
                        <span class="font-semibold text-red-700">{{ gameinfo.red_roster.team.name }}</span>
                    </div>
                    <table class="min-w-full bg-white rounded shadow text-sm">
                        <thead>
                            <tr>
                                <th>Joueur</th><th>Champion</th><th>K</th><th>D</th><th>A</th>
                            </tr>
                        </thead>
                        <tbody>
                        {% for stat in gameinfo.red_stats %}
                            <tr>
                                <td>{{ stat.roster_player.player.name }}</td>
                                <td>
                                    {% if stat.champion %}
                                        <img src="{{ stat.champion.image.url }}" class="w-6 h-6 inline mr-1" />
                                        {{ stat.champion.name }}
                                    {% endif %}
                                </td>
                                <td>{{ stat.kills }}</td>
                                <td>{{ stat.deaths }}</td>
                                <td>{{ stat.assists }}</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    {% endfor %}
</div>
{% endblock %}
